(function(b){function a(){var c=this,e=null,d=b.mobile.activePage;this.init=function(f,g){c.settings=b.extend({popupOptions:{},helpers:null,content:"",popupClass:"",popupContentClass:"popupContent ui-content",popupCloseButtonClass:"popupCloseButton ui-btn-right",popupContentCloseButtonClass:"popupContentCloseButton",popupContentCloseButtonLabel:"Okay",popupId:"popup"+d.attr("id")},f);if(typeof f==="string"){c.settings.content=f}e=b("#"+c.settings.popupId);c._create();return c.open()};this._create=function(){if(e.length==0){c.el={popup:b("<div></div>").attr({id:c.settings.popupId,"data-role":"popup","data-theme":"b","data-overlay-theme":"b"}),popupContent:b("<div></div>").attr({"data-role":"content"}).addClass(c.settings.popupContentClass),popupCloseButton:b("<a></a>").attr({href:"#","data-rel":"back","data-role":"button","data-icon":"delete","data-iconpos":"notext"}).addClass(c.settings.popupCloseButtonClass).html("Close").button(),popupContentCloseButton:b("<a></a>").attr({href:"#","data-rel":"back","data-inline":true,"data-icon":"check","data-iconpos":"right","data-theme":"e"}).html(c.settings.popupContentCloseButtonLabel).button()};c.el.popup.append(c.el.popupCloseButton);c.el.popup.append(c.el.popupContent).append(c.el.popupContentCloseButton);d.append(c.el.popup)}else{c.el={popup:e,popupContent:e.find(".popupContent"),popupCloseButton:e.find(".popupCloseButton"),popupContentCloseButton:e.find(".popupContentCloseButton")}}if(typeof c.settings.content==="string"){c.el.popupContent.html(c.settings.content)}if(c.settings.content instanceof jQuery){c.el.popupContent.append(c.settings.content)}if(c.settings.helpers){b.each(c.settings.helpers,function(f,g){this.apply(c.el[f])})}e=b("#"+c.settings.popupId);e.popup()};c.open=function(){return e.popup("open",c.settings.popupOptions)};c.close=function(){return e.popup("close")}}b.dynamic_popup=function(d){var c=new a();return c.init(d,this)}})(jQuery);