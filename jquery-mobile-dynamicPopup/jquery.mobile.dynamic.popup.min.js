(function(b){function f(){var a=this,c=null,e=b.mobile.activePage;this.init=function(d){a.settings=b.extend({popupOptions:{},callbacks:null,content:"",popupClass:"",popupContentClass:"popupContent ui-content",popupCloseButtonClass:"popupCloseButton ui-btn-right",popupContentCloseButtonClass:"popupContentCloseButton",popupContentCloseButtonLabel:"Okay",popupId:"popup"+e.attr("id")},d);c=b("#"+a.settings.popupId);a._create();return a.open()};this._create=function(){if(c.length==0){a.el={popup:b("<div></div>").attr({id:a.settings.popupId,
    "data-role":"popup","data-theme":"b","data-overlay-theme":"b"}),popupContent:b("<div></div>").attr({"data-role":"content"}).addClass(a.settings.popupContentClass),popupCloseButton:b("<a></a>").attr({href:"#","data-rel":"back","data-role":"button","data-icon":"delete","data-iconpos":"notext"}).addClass(a.settings.popupCloseButtonClass).html("Close").button(),popupContentCloseButton:b("<a></a>").attr({href:"#","data-rel":"back","data-inline":true,"data-icon":"check","data-iconpos":"right","data-theme":"e"}).html("Okay").button()};
    a.el.popup.append(a.el.popupCloseButton);a.el.popup.append(a.el.popupContent).append(a.el.popupContentCloseButton);e.append(a.el.popup)}else a.el={popup:c,popupContent:c.find(".popupContent"),popupCloseButton:c.find(".popupCloseButton"),popupContentCloseButton:c.find(".popupContentCloseButton")};typeof a.settings.content==="string"&&a.el.popupContent.html(a.settings.content);a.settings.content instanceof jQuery&&a.el.popupContent.append(a.settings.content);a.settings.callbacks&&b.each(a.settings.callbacks,
    function(d){this.apply(a.el[d])});c=b("#"+a.settings.popupId);c.popup()};a.open=function(){return c.popup("open",a.settings.popupOptions)};a.close=function(){return c.popup("close")}}b.fn.dynamicPopup=function(a){return(new f).init(a,this)}})(jQuery);
